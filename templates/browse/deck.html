{# Needs variables:
  deck      (Deck): deck.
#}

<!--The main deck browsing and editing page.-->
<!--Contains the table of items and the hidden editing form.-->

{% extends "base.html" %}
{% block content %}
  <h2>Viewing deck "{{deck.name}}":</h2>
  <div class="table-frame">
    <!--table frame containing the table.-->
    <table class="table"
              id="data-table">
    <!--The table itself.-->
      <thead>
        <!-- Headings-->
        <th onclick="sortItems(this)">ID</th>
        <th onclick="sortItems(this)">{{deck.languages.0}}</th>
        <th onclick="sortItems(this)">{{deck.languages.1}}</th>
        <th>Action</th>
      </thead>
      <tbody>
        <!--deck rows-->
        {% for item in deck.cards %}
          <tr>
            <td>{{item.id}}</td>
            <td>{{item.key0}}</td>
            <td>{{item.key1}}</td>
            <td>
                <button onclick="editItem(this)">Edit</button>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div><button onclick="addItem()">Add new</button></div>
  <!--area where edited item will appear-->
  <div id="editorContainer"></div>
  <div id="itemEditor">
    <!--invisible div, containing html for item editor.-->
    <form action="/browse/{{deck.name}}/" method="POST">
      <table>

        <tr>
          <td>
            <input
              type = "hidden"
              name = "method"
              id = "method"
              value = "edit">
          </td>
        </tr>

        <tr>
          <td><labeL>ID</labeL></td>
          <td>
            <input type="text"
                   name="id"
                   id="id"
                   readonly>
          </td>
        </tr>

        <tr>
          <td><labeL>{{deck.languages.0}}</labeL></td>
          <td>
            <input type = "text"
                     name = "key0"
                     id   = "key0">
          </td>
        </tr>

        <tr>
          <td><labeL>{{deck.languages.1}}</labeL></td>
          <td>
            <input type="text"
                   name="key1"
                   id="key1">
          </td>
        </tr>

      </table>
      <input type="submit"
             value="Edit">
    </form>
  </div>
  <div id="itemAdder">
    <!--invisible div, containing html for item adder.-->
    <form action="/browse/{{deck.name}}/" method="POST">
      <!-- Table with two rows and a submit button.-->
      <table>
        <tr>

          <tr>
            <td>
              <input
                type = "hidden"
                name = "method"
                id = "method"
                value = "add">
            </td>
          </tr>

          <td>{{deck.languages.0}}</td>
          <!--First language name-->
          <td>
          <!--Inputbox for the key value.-->
            <input type="text" 
                    name="key0" 
                    placeholder="value">
          </td>
        </tr>
        <tr>
          <td>{{deck.languages.1}}</td>
          <!--Second language name-->
          <td>
            <input type="text" 
                   name="key1" 
                   placeholder="value">
          </td>
        </tr>
      </table>
      <input type="submit" value="Add">
    </form>
  </div>
{% endblock %}